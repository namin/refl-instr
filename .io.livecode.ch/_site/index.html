{% extends "base_livecode.html" %}

{% block title %}refl-instr{% endblock %}

{% block content %}
<h2>Examples</h2>

<div class="live" id="ex_factorial">
(load "env.scm")
(load "instr.scm")
(repl)
(define (factorial n) (if (= n 0) 1 (* n (factorial (- n 1)))))
(factorial 6)
</div>

<div class="live" id="ex_max">
(load "env.scm")
(load "instr.scm")
(repl)
(define (map f xs) (if (null? xs) '() (cons (f (car xs)) (map f (cdr xs)))))
(define (max xs) (let ((y 0)) (map (lambda (x) (if (> x y) (set! y x)) y) xs)))
(max '(3 2 4 7 5))
</div>

<div class="live" id="ex_taba">
(load "env.scm")
(load "instr.scm")
(set! display-instr display-instr-taba)
(repl)
(define cnv
  (lambda (xs ys)
    (define walk
      (lambda (xs)
        (if (null? xs)
            (cons '() ys)
            (let ((rys (walk (cdr xs))))
              (let ((r (car rys))
                    (ys (cdr rys)))
                (cons (cons (cons (car xs) (car ys)) r)
                      (cdr ys)))))))
    (car (walk xs))))

(cnv '(1 2 3) '(a b c))
</div>

{% endblock %}
